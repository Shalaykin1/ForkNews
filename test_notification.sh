#!/bin/bash

echo "=== ForkNews Notification Test ==="
echo ""
echo "Этот скрипт поможет диагностировать проблему с уведомлениями."
echo ""
echo "Шаг 1: Подключите устройство через ADB"
echo "Шаг 2: Запустите следующие команды:"
echo ""
echo "# Проверяем, запущено ли приложение"
echo "adb shell dumpsys activity | grep forknews"
echo ""
echo "# Проверяем запланированные alarms"
echo "adb shell dumpsys alarm | grep forknews"
echo ""
echo "# Смотрим логи приложения (фильтр по DiagnosticLogger)"
echo "adb logcat -s DiagnosticLogger:V UpdateCheckService:V AlarmReceiver:V AlarmScheduler:V"
echo ""
echo "# Принудительно запустить проверку обновлений"
echo "adb shell am start-foreground-service -n com.forknews/.service.UpdateCheckService"
echo ""
echo "# Проверить разрешения уведомлений"
echo "adb shell dumpsys notification | grep forknews"
echo ""
echo "# Посмотреть каналы уведомлений"
echo "adb shell cmd notification list_channels com.forknews"
echo ""
